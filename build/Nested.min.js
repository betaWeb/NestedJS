!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("Nested",[],t):"object"==typeof exports?exports.Nested=t():e.Nested=t()}(window,function(){return function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=71)}({2:function(e,t){var r;r=function(){return this}();try{r=r||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(r=window)}e.exports=r},29:function(e,t,r){"use strict";(function(e,t){var r={isBrowser:function(){try{return void 0!==window&&void 0!==window.document}catch(e){return!1}},isNode:function(){try{return void 0!==e&&void 0!==e.exports}catch(e){return!1}},retrieveContext:function(){var e=null;return r.isBrowser()?e=window:r.isNode()&&(e=t),e},getContext:function(e){return r.isBrowser()&&window.__nestedjs?window.__nestedjs[e]||null:r.isNode()&&t.__nestedjs&&t.__nestedjs[e]||null},setContext:function(e){var t=r.retrieveContext();if(null===t||void 0===t)throw new Error("NestedJS.setContext - no context found");t.__nestedjs||(t.__nestedjs={});var n=Math.floor(r.randomNum()*(+new Date/1e3));return t.__nestedjs[n]=e,n},clearContext:function(){var e=r.retrieveContext();if(null===e||void 0===e)throw new Error("NestedJS.clearContext - no context found");e.__nestedjs={}},randomNum:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e4;return Math.floor(Math.random()*t+e)}};e.exports=r}).call(this,r(70)(e),r(2))},43:function(e,t,r){"use strict";e.exports={properties:{node_id:"__nodeid",node_id_prefix:"node-",parent_id:"__parentid",root_id:"__rootid",prev_id:"__previd",next_id:"__nextid",depth:"__depth"}}},68:function(e,t,r){"use strict";var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();var o=r(43).properties,i=r(29).getContext,u=[o.node_id,o.parent_id,o.next_id,o.prev_id,o.depth],l=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._properties=this._mapProperties(t),this._tree_uniqueid=r}return n(e,[{key:"hasProperty",value:function(e){return void 0!==this._properties[e]}},{key:"getProperty",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return this._properties[e]||t}},{key:"setProperty",value:function(e,t){this._properties[e]=t}},{key:"getId",value:function(){return this.getProperty(o.node_id)}},{key:"getParentId",value:function(){return this.getProperty(o.parent_id)}},{key:"getPreviousId",value:function(){return this.getProperty(o.prev_id)}},{key:"getNextId",value:function(){return this.getProperty(o.next_id)}},{key:"getRootId",value:function(){return this.getProperty(o.root_id)}},{key:"childNodes",value:function(){return this.getProperty(this.getTree().options.children_key,[])}},{key:"previousNodes",value:function(){var e=this.getTree();return null!==e?e.getPreviousNodes(this):null}},{key:"previousNode",value:function(){var e=this.getTree();return null!==e?e.getPreviousNode(this):null}},{key:"nextNodes",value:function(){var e=this.getTree();return null!==e?e.getNextNodes(this):null}},{key:"nextNode",value:function(){var e=this.getTree();return null!==e?e.getNextNode(this):null}},{key:"parentNode",value:function(){var e=this.getTree();return null!==e?e.getParentNode(this):null}},{key:"rootNode",value:function(){var e=this.getTree();return null!==e?e.getRootNode(this):null}},{key:"siblingsNodes",value:function(){var e=this.getTree();return null!==e?e.getSiblingsNodes(this):null}},{key:"getTree",value:function(){return i(this._tree_uniqueid)}},{key:"breadcrumb",value:function(){var e=this.getTree();return null!==e?e.getBreadcrumb(this).reverse():[]}},{key:"firstChild",value:function(){if(!this.hasChildNodes())return null;var e=this.childNodes();return e&&e.length?e[0]:null}},{key:"lastChild",value:function(){if(!this.hasChildNodes())return null;var e=this.childNodes();return e&&e.length?e[e.length-1]:null}},{key:"nthChild",value:function(e){if(!this.hasChildNodes())return null;var t=this.childNodes();return t&&t.length?t[e]:null}},{key:"countChildren",value:function(){return this.hasChildNodes()?this.childNodes().length:0}},{key:"hasChildNodes",value:function(){var e=this.childNodes();return Boolean(void 0!==e&&null!==e&&e.length>0)}},{key:"hasParentNode",value:function(){return Boolean(null!==this.getParentId())}},{key:"hasPreviousNode",value:function(){return Boolean(null!==this.getPreviousId())}},{key:"hasNextNode",value:function(){return Boolean(null!==this.getNextId())}},{key:"hasRootNode",value:function(){return Boolean(null!==this.getRootId())}},{key:"depth",value:function(){return this.getProperty(o.depth)||0}},{key:"_mapProperties",value:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]||u.includes(t)||(this[t]=e[t]));return e}},{key:"properties",get:function(){return this._properties}}]),e}();e.exports=l},69:function(e,t,r){"use strict";var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();var o=r(68),i=r(43).properties,u=r(29),l=u.getContext,s=u.setContext,d=u.randomNum,a={children_key:"children"},c=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.options=Object.assign({},a,r),this._uniqueid=s(this),this.data=this.buildTree(t),this.currentNode=null,l(this._uniqueid)}return n(e,[{key:"getUniqueId",value:function(){return this._uniqueid}},{key:"getTreeSize",value:function(){return this._count||0}},{key:"retrieveNode",value:function(e){return this._retrieveNode(e,this.data)}},{key:"retrieveNodesBy",value:function(e,t){return e?this._retrieveNodesBy(e,t,this.data):null}},{key:"retrieveNodesByDepth",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this._retrieveNodesByDepth(e,this.data)}},{key:"getParentNode",value:function(e){var t=e.constructor===o?e.getParentId():e;return this.retrieveNode(t)}},{key:"getSiblingsNodes",value:function(e){return[].concat(this.getPreviousNodes(e),this.getNextNodes(e))}},{key:"getPreviousNodes",value:function(e){e.constructor===String&&(e=this.retrieveNode(e));var t=[];return null!==e&&null!==e.getPreviousId()&&(t.push(e.previousNode()),t=t.concat(this.getPreviousNodes(e.getPreviousId()))),t}},{key:"getPreviousNode",value:function(e){var t=e.constructor===o?e.getPreviousId():e;return null!==t?this.retrieveNode(t):null}},{key:"getNextNodes",value:function(e){e.constructor===String&&(e=this.retrieveNode(e));var t=[];return null!==e&&null!==e.getNextId()&&(t.push(e.nextNode()),t=t.concat(this.getNextNodes(e.getNextId()))),t}},{key:"getNextNode",value:function(e){var t=e.constructor===o?e.getNextId():e;return null!==t?this.retrieveNode(t):null}},{key:"getRootNode",value:function(e){var t=e.constructor===o?e.getRootId():e;return null!==t?this.retrieveNode(t):null}},{key:"getBreadcrumb",value:function(e){e.constructor===String&&(e=this.retrieveNode(e));var t=[];return t.push(e),null!==e.getParentId()&&(t=t.concat(this.getBreadcrumb(e.getParentId()))),t}},{key:"buildTree",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,u=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;null===t?u=0:u+=1;for(var l=e.reduce(function(e,l){return l.constructor!==o&&(l=new o(l,r._uniqueid)),l.setProperty(i.node_id,r._setUniqueId()),l.setProperty(i.parent_id,t),null===t?(n=l.getId(),l.setProperty(i.root_id,null)):l.setProperty(i.root_id,n),l.hasChildNodes()&&l.setProperty(r.options.children_key,r.buildTree(l.childNodes(),l.getId(),n,u)),e.push(l),e},[]),s=0;s<l.length;s++){var d=void 0!==l[s-1]&&l[s-1].constructor===o,a=void 0!==l[s+1]&&l[s+1].constructor===o;l[s].setProperty(i.prev_id,d?l[s-1].getId():null),l[s].setProperty(i.next_id,a?l[s+1].getId():null),l[s].setProperty(i.depth,u)}return l}},{key:"_retrieveNode",value:function(e,t){if(void 0===e||null===e)return null;if(null!==this.currentNode&&this.currentNode.getId()===e)return this.currentNode;for(var r=null,n=0;n<t.length;n++){if((r=t[n]).getId()===e){this.currentNode=r;break}r=r.hasChildNodes()?this._retrieveNode(e,r.childNodes()):null}return this.currentNode}},{key:"_retrieveNodesBy",value:function(e,t,r){for(var n=[],o=0;o<r.length;o++){var i=r[o];i.hasProperty(e)&&i.getProperty(e)===t&&n.push(i),i.hasChildNodes()&&(n=n.concat(this._retrieveNodesBy(e,t,i.childNodes())))}return n}},{key:"_retrieveNodesByDepth",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=[],n=0;n<t.length;n++){var o=t[n];if(o.depth()>e)break;o.depth()===e?r.push(o):o.hasChildNodes()&&(r=r.concat(this._retrieveNodesByDepth(e,o.childNodes())))}return r}},{key:"_setUniqueId",value:function(){return this._count||(this._count=0),this._count+=1,""+i.node_id_prefix+this._count*d()}}]),e}();e.exports=c},70:function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},71:function(e,t,r){"use strict";var n=r(29).isNode,o=r(69);if(!n())throw new Error("[Fatal Error] NestedJS - No valid context found");e.exports=o}})});
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("Nested",[],t):"object"==typeof exports?exports.Nested=t():e.Nested=t()}(window,function(){return function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},r.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=6)}([function(e,t,r){(function(e,t){let r={isBrowser(){try{return void 0!==window&&void 0!==window.document}catch(e){return!1}},isNode(){try{return void 0!==e&&void 0!==e.exports}catch(e){return!1}},retrieveContext(){let e=null;return r.isBrowser()?e=window:r.isNode()&&(e=t),e},getContext:e=>r.isBrowser()&&window.__nestedjs?window.__nestedjs[e]||null:r.isNode()&&t.__nestedjs&&t.__nestedjs[e]||null,setContext(e){let t=r.retrieveContext();if(null===t||void 0===t)throw new Error("NestedJS.setContext - no context found");t.__nestedjs||(t.__nestedjs={});let n=Math.floor(r.randomNum()*(+new Date/1e3));return t.__nestedjs[n]=e,n},clearContext(){let e=r.retrieveContext();if(null===e||void 0===e)throw new Error("NestedJS.clearContext - no context found");e.__nestedjs={}},randomNum:(e=1,t=1e4)=>Math.floor(Math.random()*t+e)};e.exports=r}).call(this,r(5)(e),r(4))},function(e,t){e.exports={properties:{node_id:"__nodeid",node_id_prefix:"node-",parent_id:"__parentid",root_id:"__rootid",prev_id:"__previd",next_id:"__nextid"}}},function(e,t,r){const{properties:n}=r(1),{getContext:o}=r(0),i=[n.node_id,n.parent_id,n.next_id,n.prev_id];e.exports=class{constructor(e={},t=null){this._properties=this._mapProperties(e),this._tree_uniqueid=t}get properties(){return this._properties}hasProperty(e){return void 0!==this._properties[e]}getProperty(e,t=null){return this._properties[e]||t}setProperty(e,t){this._properties[e]=t}getId(){return this.getProperty(n.node_id)}getParentId(){return this.getProperty(n.parent_id)}getPreviousId(){return this.getProperty(n.prev_id)}getNextId(){return this.getProperty(n.next_id)}getRootId(){return this.getProperty(n.root_id)}childNodes(){return this.getProperty(this.getTree().options.children_key,[])}previousNodes(){let e=this.getTree();return null!==e?e.getPreviousNodes(this):null}previousNode(){let e=this.getTree();return null!==e?e.getPreviousNode(this):null}nextNodes(){let e=this.getTree();return null!==e?e.getNextNodes(this):null}nextNode(){let e=this.getTree();return null!==e?e.getNextNode(this):null}parentNode(){let e=this.getTree();return null!==e?e.getParentNode(this):null}rootNode(){let e=this.getTree();return null!==e?e.getRootNode(this):null}siblingsNodes(){let e=this.getTree();return null!==e?e.getSiblingsNodes(this):null}getTree(){return o(this._tree_uniqueid)}breadcrumb(){let e=this.getTree();return null!==e?e.getBreadcrumb(this).reverse():[]}firstChild(){if(!this.hasChildNodes())return null;const e=this.childNodes();return e&&e.length?e[0]:null}lastChild(){if(!this.hasChildNodes())return null;const e=this.childNodes();return e&&e.length?e[e.length-1]:null}nthChild(e){if(!this.hasChildNodes())return null;const t=this.childNodes();return t&&t.length?t[e]:null}countChildren(){return this.hasChildNodes()?this.childNodes().length:0}hasChildNodes(){const e=this.childNodes();return Boolean(void 0!==e&&null!==e&&e.length>0)}hasParentNode(){return Boolean(null!==this.getParentId())}hasPreviousNode(){return Boolean(null!==this.getPreviousId())}hasNextNode(){return Boolean(null!==this.getNextId())}hasRootNode(){return Boolean(null!==this.getRootId())}_mapProperties(e){for(let t in e)e.hasOwnProperty(t)&&(this[t]||i.includes(t)||(this[t]=e[t]));return e}}},function(e,t,r){const n=r(2),{properties:o}=r(1),{getContext:i,setContext:s,randomNum:d}=r(0),u={children_key:"children"};e.exports=class{constructor(e=[],t={}){return this.options=Object.assign({},u,t),this._uniqueid=s(this),this.data=this.buildTree(e),this.currentNode=null,i(this._uniqueid)}getUniqueId(){return this._uniqueid}getTreeSize(){return this._count||0}retrieveNode(e){return this._retrieveNode(e,this.data)}retrieveNodesBy(e,t){return e?this._retrieveNodesBy(e,t,this.data):null}retrieveNodesByDepth(e=0){return this._retrieveNodesByDepth(e,this.data)}getParentNode(e){const t=e.constructor===n?e.getParentId():e;return this.retrieveNode(t)}getSiblingsNodes(e){return[].concat(this.getPreviousNodes(e),this.getNextNodes(e))}getPreviousNodes(e){e.constructor===String&&(e=this.retrieveNode(e));let t=[];return null!==e&&null!==e.getPreviousId()&&(t.push(e.previousNode()),t=t.concat(this.getPreviousNodes(e.getPreviousId()))),t}getPreviousNode(e){const t=e.constructor===n?e.getPreviousId():e;return null!==t?this.retrieveNode(t):null}getNextNodes(e){e.constructor===String&&(e=this.retrieveNode(e));let t=[];return null!==e&&null!==e.getNextId()&&(t.push(e.nextNode()),t=t.concat(this.getNextNodes(e.getNextId()))),t}getNextNode(e){const t=e.constructor===n?e.getNextId():e;return null!==t?this.retrieveNode(t):null}getRootNode(e){const t=e.constructor===n?e.getRootId():e;return null!==t?this.retrieveNode(t):null}getBreadcrumb(e){e.constructor===String&&(e=this.retrieveNode(e));let t=[];return t.push(e),null!==e.getParentId()&&(t=t.concat(this.getBreadcrumb(e.getParentId()))),t}buildTree(e=[],t=null,r=null){let i=e.reduce((e,i)=>(i.constructor!==n&&(i=new n(i,this._uniqueid)),i.setProperty(o.node_id,this._setUniqueId()),i.setProperty(o.parent_id,t),null===t?(r=i.getId(),i.setProperty(o.root_id,null)):i.setProperty(o.root_id,r),i.hasChildNodes()&&i.setProperty(this.options.children_key,this.buildTree(i.childNodes(),i.getId(),r)),e.push(i),e),[]);for(let e=0;e<i.length;e++){let t=void 0!==i[e-1]&&i[e-1].constructor===n,r=void 0!==i[e+1]&&i[e+1].constructor===n;i[e].setProperty(o.prev_id,t?i[e-1].getId():null),i[e].setProperty(o.next_id,r?i[e+1].getId():null)}return i}_retrieveNode(e,t){if(void 0===e||null===e)return null;if(null!==this.currentNode&&this.currentNode.getId()===e)return this.currentNode;let r=null;for(let n=0;n<t.length;n++){if((r=t[n]).getId()===e){this.currentNode=r;break}r=r.hasChildNodes()?this._retrieveNode(e,r.childNodes()):null}return this.currentNode}_retrieveNodesBy(e,t,r){let n=[];for(let o=0;o<r.length;o++){let i=r[o];i.hasProperty(e)&&i.getProperty(e)===t&&n.push(i),i.hasChildNodes()&&(n=n.concat(this._retrieveNodesBy(e,t,i.childNodes())))}return n}_retrieveNodesByDepth(e=0,t=null,r=0){let n=[];for(let o=0;o<t.length;o++){let i=t[o];i.hasParentNode()||(r=0),e===r?n.push(i):i.hasChildNodes()&&(n=n.concat(this._retrieveNodesByDepth(e,i.childNodes(),r+=1)))}return n}_setUniqueId(){return this._count||(this._count=0),this._count+=1,`${o.node_id_prefix}${this._count*d()}`}}},function(e,t){var r;r=function(){return this}();try{r=r||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(r=window)}e.exports=r},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t,r){const{isNode:n}=r(0),o=r(3);if(!n())throw new Error("[Fatal Error] NestedJS - No valid context found");e.exports=o}])});